<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IntelliQuiz AI</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />

  <script>
    if (!localStorage.getItem("token")) {
      window.location.href = "login.html";
    }
  </script>
  
</head>
<body>

  <!-- BACKGROUND SHAPES -->
  <div class="bg-shape shape1"></div>
  <div class="bg-shape shape2"></div>

  <!-- NAVBAR -->
  <header class="navbar">
    <div class="nav-left">
      <div class="logo">âš¡ <span>IntelliQuiz</span></div>
    </div>

    <div class="nav-right">
      <span id="userName" class="user-name hidden"></span>

      <a href="index.html" class="nav-link">Home</a>
      <a id="loginLink" href="login.html" class="nav-link">Login</a>
      <a id="signupLink" href="signup.html" class="nav-link">Signup</a>
      <a id="leaderboardLink" href="scoreboard.html" class="nav-link">Leaderboard</a>

      <!-- â­ FIX ADDED: THEME TOGGLE BUTTON â­ -->
      <button id="themeToggle" class="icon-btn">ğŸŒ™</button>

      <button id="logoutBtn" class="logout-btn hidden">Logout</button>
    </div>
  </header>

  <!-- HERO -->
  <main class="main">
    <section class="hero">
      <div class="badge">âœ¨ AI-Powered Quiz Generation</div>
      <h1 class="title">
        Transform Your <span class="highlight">Documents</span><br/>Into Smart Quizzes
      </h1>
      <p class="subtitle">
        Upload a document or type a topic â€” AI generates interactive quizzes instantly.
      </p>
    </section>

    <!-- MODE SWITCH -->
    <div class="mode-switch-wrapper">
      <div class="mode-switch">
        <button id="btnText" class="mode-btn active">âœï¸ Type Topic</button>
        <button id="btnFile" class="mode-btn">ğŸ“‚ Upload File</button>
      </div>
    </div>

    <!-- PANELS -->
    <section class="panels">

      <!-- TEXT MODE -->
      <div id="textPanel" class="panel">
        <textarea id="topic" placeholder="Enter topic or paste your notes..."></textarea>
      </div>

      <!-- FILE MODE -->
      <div id="filePanel" class="panel hidden">
        <div class="upload-container">
          <label id="uploadBox" class="upload-box">
            <input id="fileInput" type="file" accept=".pdf,.pptx,.ppt,.txt" hidden />
            <div class="upload-center">
              <div class="upload-circle">â¬†ï¸</div>
              <p class="upload-title">Drag & drop your file</p>
              <p class="upload-sub">or click to browse your files</p>
              <div class="upload-tag">ğŸ“„ Supports .pptx, .pdf, .txt</div>
            </div>
          </label>
        </div>
      </div>

<!-- OPTIONS -->
<div class="options-row">

  <label class="numq-label">
    Difficulty
    <select id="difficulty">
      <option value="easy">Easy</option>
      <option value="medium" selected>Medium</option>
      <option value="hard">Hard</option>
    </select>
  </label>

  <label class="numq-label">
    Number of questions
    <input
      type="number"
      id="numQ"
      min="1"
      max="10"
      value="8"
      placeholder="Max 10"
    />
  </label>
  

  <button id="generateBtn" class="generate-btn">âœ¨ Generate Quiz</button>
</div>

<p id="status" class="status">Ready</p>



<!-- OUTPUT -->
<div id="quizArea" class="quiz-area"></div>

<!-- SUMMARY -->
<div id="summary" class="score-box hidden"></div>

<!-- QUIZ HISTORY -->
<div id="history" class="quiz-area"></div>


    </section>
  </main>

  <!-- AUTH UI HANDLING -->
  <script>
    if (!localStorage.getItem("token")) {
      document.getElementById("leaderboardLink").classList.add("hidden");
    }

    const loggedIn = localStorage.getItem("token") !== null;

    if (loggedIn) {
      document.getElementById("loginLink").classList.add("hidden");
      document.getElementById("signupLink").classList.add("hidden");
      document.getElementById("logoutBtn").classList.remove("hidden");
    }

    document.getElementById("logoutBtn").onclick = () => {
      localStorage.clear();
      window.location.href = "login.html";
    };
    const user = JSON.parse(localStorage.getItem("user"));
const userNameEl = document.getElementById("userName");

if (user && user.name) {
  userNameEl.textContent = `ğŸ‘‹ Hi, ${user.name}`;
  userNameEl.classList.remove("hidden");
}

  </script>

  <!-- MAIN LOGIC -->
  <script src="script.js" defer></script>

</body>
</html>
